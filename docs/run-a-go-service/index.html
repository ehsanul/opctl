<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-94109316-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>

<title data-react-helmet="true">Run a go service | Opctl</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Run a go service | Opctl"><meta data-react-helmet="true" name="description" content="We&#x27;ll now look at an op to run a sample Go application. Please see the code at [https://github.com/opctl/opctl/tree/main/examples/run-a-go-service](https://github.com/opctl/opctl/tree/main/examples/run-a-go-service)"><meta data-react-helmet="true" property="og:description" content="We&#x27;ll now look at an op to run a sample Go application. Please see the code at [https://github.com/opctl/opctl/tree/main/examples/run-a-go-service](https://github.com/opctl/opctl/tree/main/examples/run-a-go-service)"><meta data-react-helmet="true" property="og:url" content="https://opctl.io/docs/run-a-go-service">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.e33a1858.css">


<link rel="preload" href="/styles.d3fb2ce6.js" as="script">

<link rel="preload" href="/runtime~main.785966c1.js" as="script">

<link rel="preload" href="/main.fc2c5e61.js" as="script">

<link rel="preload" href="/1.88297264.js" as="script">

<link rel="preload" href="/2.3972cbb4.js" as="script">

<link rel="preload" href="/77.949c528f.js" as="script">

<link rel="preload" href="/20ac7829.d0857467.js" as="script">

<link rel="preload" href="/17896441.faaa45ea.js" as="script">

<link rel="preload" href="/60eeb4fa.444a00db.js" as="script">

</head>
<body>

<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="opctl Logo"><strong class="navbar__title">Opctl</strong></a><a class="navbar__item navbar__link" href="/docs/introduction">Docs</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/orgs/opspec-pkgs/repositories" class="navbar__item navbar__link">Packages</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://join.slack.com/t/opctl/shared_invite/zt-51zodvjn-Ul_UXfkhqYLWZPQTvNPp5w" class="navbar__item navbar__link">Slack</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/opctl/opctl" class="navbar__item navbar__link">GitHub</a><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="opctl Logo"><strong class="navbar__title">Opctl</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/orgs/opspec-pkgs/repositories" class="menu__link">Packages</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://join.slack.com/t/opctl/shared_invite/zt-51zodvjn-Ul_UXfkhqYLWZPQTvNPp5w" class="menu__link">Slack</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/opctl/opctl" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/setup/bare-metal">Bare Metal</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/setup/azure-pipelines">Azure Pipelines</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/setup/docker">Docker</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/setup/github">Github</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/setup/gitlab">Gitlab</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/setup/kubernetes">Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/setup/travis">Travis</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Training</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/training/hello-world">Hello World</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/training/inputs-outputs">Inputs &amp; Outputs</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Portable Dev</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/run-a-go-service">run a go service</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/run-a-react-app">run a react app</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Containers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/training/containers/how-do-i-communicate-with-an-opctl-container">How do I communicate with an opctl container?</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/training/containers/how-do-i-get-opctl-containers-to-communicate">How do I get opctl containers to communicate?</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/training/containers/how-do-i-run-a-container">How do I run a container?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">UI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/training/ui/how-do-i-visualize-an-op">How do I visualize an op?</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Opspec</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/index">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Op [directory]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/index">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Op [object]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/index">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Call [object]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/call/index">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Container Call [object]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/call/container/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/call/container/image">Image [object]</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/call/loop-vars">Loop Vars [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/call/op">Op Call [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/call/parallel-loop">Parallel Loop Call [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/call/predicate">Predicate [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/call/pull-creds">Pull Creds [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/call/rangeable-value">Rangeable Value [Array|Object|String]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/call/serial-loop">Serial Loop Call [object]</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Parameter [object]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/parameter/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/parameter/array">Array Parameter [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/parameter/boolean">Boolean Parameter [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/parameter/dir">Dir Parameter [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/parameter/file">File Parameter [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/parameter/number">Number Parameter [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/parameter/object">Object Parameter [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/parameter/socket">Socket Parameter [object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/parameter/string">String Parameter [object]</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/identifier">Identifier [string]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/initializer">Initializer [array|boolean|number|string|object]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/markdown">Markdown [string]</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/op-directory/op/variable-reference">Variable Reference [string]</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Types</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/types/array">Array</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/types/boolean">Boolean</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/types/dir">Dir</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/types/file">File</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/types/number">Number</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/types/object">Object</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/types/socket">Socket</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/opspec/types/string">String</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/ui">UI</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/global-options">global-options</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">auth</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/auth/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/auth/add">add</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/events">events</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/ls">ls</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">node</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/node/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/node/create">create</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/node/kill">kill</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">op</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/op/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/op/create">create</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/op/install">install</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/op/kill">kill</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/op/validate">validate</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/run">run</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/self-update">self-update</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cli/ui">ui</a></li></ul></li><li class="menu__list-item"><a class="menu__link" to="https://petstore.swagger.io/?url=https://raw.githubusercontent.com/opctl/opctl/main/api/openapi.yaml" target="_blank" rel="noreferrer noopener" href="https://petstore.swagger.io/?url=https://raw.githubusercontent.com/opctl/opctl/main/api/openapi.yaml">ReST API</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">SDKs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" to="https://github.com/opctl/opctl/tree/main/sdks/go" target="_blank" rel="noreferrer noopener" href="https://github.com/opctl/opctl/tree/main/sdks/go">Go</a></li><li class="menu__list-item"><a class="menu__link" to="https://github.com/opctl/opctl/tree/main/sdks/js" target="_blank" rel="noreferrer noopener" href="https://github.com/opctl/opctl/tree/main/sdks/js">Js</a></li><li class="menu__list-item"><a class="menu__link" to="https://github.com/opctl/opctl/tree/main/sdks/react" target="_blank" rel="noreferrer noopener" href="https://github.com/opctl/opctl/tree/main/sdks/react">React</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Run a go service</h1></header><div class="markdown"><p>We&#x27;ll now look at an op to run a sample Go application. Please see the code at <a href="https://github.com/opctl/opctl/tree/main/examples/run-a-go-service">https://github.com/opctl/opctl/tree/main/examples/run-a-go-service</a>
The sample application we have requires a mysql database, therefore to run it locally we need to:
1. Start a MySQL database with some DB credentials
2. Seed the DB with sample data
3. Start the application and provide the MySQL DB credentials as inputs - our application will read those from environment variables</p><p>The ops to make that happen are explained below.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mysql"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mysql" title="Direct link to heading">#</a>mysql</h4><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> runs a mysql container</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> seeding it with sample data</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">MYSQL_USER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> username for MySQL user to create</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> testuser</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> password for MySQL user to create</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> testpassword</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> name of mysql database to create</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> testapp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">MYSQL_HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">go</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">container</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">dirs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># mount our data seed scripts</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">/docker-entrypoint-initdb.d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mysql:8&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># this sets an opctl overlay network DNS A record so the containers available via this name.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">go</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">envVars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">MYSQL_USER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;yes&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">3306</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3306</span></div></div></div></div></div><p>This op will run a MySQL database in a Docker container and seeds the MySQL database with a single table and a single row of data.</p><p>Note that instead of writing the <code>cmd</code> inline, we could have also put the run script in a file in the op directory and referenced it.
e.g.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/run.sh&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div></div></div><p>This becomes useful for readability if the script we&#x27;re running in a container is large.</p><p>Note that while we could have also built a custom docker image that contains that script and ran it, that&#x27;s not a recommended practice. While the op remains portable with that approach, it is less transparent and harder to maintain, since we would have the extra step of building and pushing that image whenever we make a change to the script. Instead, we usually opt for the leanest Docker image that fulfills our use case, and include any scripts or binaries we need in the op directory.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="dev"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#dev" title="Direct link to heading">#</a>dev</h4><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> dev</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> runs go</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">svc for development</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">MYSQL_USER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> username for MySQL user to create</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> testuser</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> password for MySQL user to create</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> testpassword</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Database to create</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> testapp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">MYSQL_HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the host for mysql is the container name in the mysql op</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">parallel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">op</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ../mysql </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># we reference the mysql op using its relative path to this op</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># we pass the relevant inputs through to the mysql op</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">MYSQL_USER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">MYSQL_HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">container</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;golang:1.15&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> go</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">svc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">dirs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># mount the source code of our app to the container</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">/src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $(../..) </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">envVars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># let our code know how to connect to the DB</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">MYSQL_USER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">MYSQL_HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">workDir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /src</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">8080</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">ce</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token scalar string" style="color:rgb(195, 232, 141)"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            go get -u github.com/cespare/reflex # get reflex to watch and hot-reload our main.go</span></div><div class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            sleep 30 # we&#x27;ll sleep while the MySQL DB starts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            /go/bin/reflex -g &#x27;main.go&#x27; -s -- sh -c &#x27;go run main.go&#x27;</span></div></div></div></div></div><p>This op will do the following, in parallel:
1. Run the mysql op, passing in the inputs needed to create it
2. run our service in the <code>golang</code> container. We&#x27;ll use <a href="https://github.com/cespare/reflex">reflex</a> to make development easier and avoid having to restart the whole operation after every change to main.go</p><p>Now to run the service locally, we only run <code>opctl run dev</code></p><p>Notice how we can run ops in a <code>parallel</code> block. Our app runs parallel to the MySQL DB container (via the <code>mysql</code> op), because we need mysql running while our app runs.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/opctl/opctl/edit/main/website/docs/run-a-go-service.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-03-23T15:44:49.000Z" class="docLastUpdatedAt_1sqk">3/23/2021</time> by <strong>=</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/training/inputs-outputs"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« Inputs &amp; Outputs</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/run-a-react-app"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">Run a react app »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction">Docs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://join.slack.com/t/opctl/shared_invite/zt-51zodvjn-Ul_UXfkhqYLWZPQTvNPp5w">Slack</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/opctl/opctl">Github</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021 opctl.io</div></div></div></footer>
</div>

<script src="/styles.d3fb2ce6.js"></script>

<script src="/runtime~main.785966c1.js"></script>

<script src="/main.fc2c5e61.js"></script>

<script src="/1.88297264.js"></script>

<script src="/2.3972cbb4.js"></script>

<script src="/77.949c528f.js"></script>

<script src="/20ac7829.d0857467.js"></script>

<script src="/17896441.faaa45ea.js"></script>

<script src="/60eeb4fa.444a00db.js"></script>


</body>
</html>